## Ход решения

(1) Рассмотрим простой случай для двух контейнеров с шарами белого и черного цветов соответственно, где в каждом контейнере лежит по одному шару каждого цвета.

$\begin{bmatrix}1 & 1 \\ 1 & 1 \end{bmatrix}$

Поменяем 1 белый шар из первого контейнера на 1 черный шар из второго контейнера:
$\begin{bmatrix}1-1 & 1+1 \\ 1+1 & 1-1 \end{bmatrix}$ = $\begin{bmatrix}0 & 2 \\ 2 & 0 \end{bmatrix}$. Поменяем контейнеры местами и получим диагональную матрицу $\begin{bmatrix}2 & 0 \\ 0 & 2 \end{bmatrix}$. Красиво :)

(2) Теперь вернемся к матрице единиц, положим в первый контейнер еще 1 белый шар и посмотрим, что из этого выйдет.

$\begin{bmatrix}2 & 1 \\ 1 & 1 \end{bmatrix}$

$\begin{bmatrix}2 & 1 \\ 1 & 1 \end{bmatrix}$ -> $\begin{bmatrix}2+1 & 1-1 \\ 1-1 & 1+1 \end{bmatrix}$ -> $\begin{bmatrix}3 & 0 \\ 0 & 2 \end{bmatrix}$

Либо так:

$\begin{bmatrix}2 & 1 \\ 1 & 1 \end{bmatrix}$ -> $\begin{bmatrix}2-1 & 1+1 \\ 1+1 & 1-1 \end{bmatrix}$ -> $\begin{bmatrix}1 & 2 \\ 2 & 0 \end{bmatrix}$ -> $\begin{bmatrix}1+2 & 2-2 \\ 2-2 & 0+2 \end{bmatrix}$ -> $\begin{bmatrix}3 & 0 \\ 0 & 2 \end{bmatrix}$

(3) Окей. Попробуем добавить в первый контейнер еще 1 черный шар:

$\begin{bmatrix}2 & 2 \\ 1 & 1 \end{bmatrix}$

$\begin{bmatrix}2 & 2 \\ 1 & 1 \end{bmatrix}$ -> $\begin{bmatrix}2-1 & 2+1 \\ 1+1 & 1-1 \end{bmatrix}$ -> $\begin{bmatrix}1 & 3 \\ 2 & 0 \end{bmatrix}$ (\*) -> $\begin{bmatrix}1+2 & 3-2 \\ 2-2 & 0+2 \end{bmatrix}$ -> $\begin{bmatrix}3 & 1 \\ 0 & 2 \end{bmatrix}$

(\*) - чем-то напоминает промежуточный этап (2), однако в данном случае "схлопнуть" матрицу также не получается, каждая следующая попытка отсортировать шары по контейнерам будет лишь "отзеркаливать" её.

Отсортировать не получилось :(

Понять решение сходу тоже :(

---

Окей, почему в первых двух случаях отсортировать шары получилось, а в третьем нет? Как матричное представление связано с условиями задачи?

Строка в нашей матрице определяет количество шаров каждого цвета в одном контейнере, а столбец - количество шаров одного цвета в каждом контейнере. Любой обмен шаров, очевидно, не может изменить их общее количество ни в одном из контейнеров, а значит, элементы строк в матрице могут меняться, но сумма этих строк будет оставаться неизменной. Аналогичная ситуация со столбцами.

Условия следующие:

> В каждом контейнере лежат лишь шары одинакового цвета.

> Каждый цвет лежит лишь в одном контейнере.

То-есть в результате сортировки нужно получить такую матрицу, где в каждой строке и в каждом столбце должен остаться лишь один ненулевой элемент (иными словами, эту матрицу можно привести к диагональному виду посредством перестановки контейнеров-строк или цветов-столбцов, как в первых двух примерах). Когда такую матрицу можно получить, а когда нельзя?

Мысль первая: вместимость контейнера ограничена, а количество шаров одного цвета может быть как больше, так и меньше ее. В (2) вместимость первого контейнера - 3, второго - 2, шаров белого цвета - 3, черного - 2, соответственно. В результате сортировки все шары распределились по контейнерам соответствующего размера. В (3) вместимость первого контейнера - 4, второго - 2, шаров белого цвета - 3, черного - 3. В первый контейнер можно положить шары любого из цветов, а во второй, как не переставляй, запихнуть все шары не получится. В итоге, в первом контейнере останется один лишний шар другого цвета.

Мысль вторая: в силу характера операции перемещения, ситуации, когда все шары попали в свой контейнер, но где-то еще осталось свободное место, быть не может.

Мысль третья: для успешной сортировки необходимо, чтобы каждый контейнер мог вместить все шары "своего" цвета. Иначе говоря, для каждой строки/столбца матрицы нужно найти такой столбец/строку (без повторений), что суммы их элементов будут равны.

Алгоритм начинает вырисовываться.

На примере (2) просуммируем элементы для каждой строки: [3, 2]; аналогично для каждого столбца: [3, 2]. Очевидно, каждой строке/столбцу можно найти пару. На примере (3) получатся суммы [4, 2] для строк и [3, 3] для столбцов, здесь пар не будет.

Для нахождения таких пар можно составить два массива (с суммами элементов каждой строки и каждого столбца соответственно), отсортировать их и сравнить через цикл. Результат сравнения получившихся массивов будет указывать на наличие или отсутствие строк/столбцов без пары и характеризовать собой ответ на вопрос из задания: если совпадение полное, значит, отсортировать шары можно. В противном случае отсортировать их заданным образом не получится.
